<!doctype html>
<html lang="{{ or .Site.LanguageCode .Site.Language.Lang }}">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>
    <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600&family=Source+Serif+Pro:wght@400;500&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">

    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: 'Lora', 'Source Serif Pro', Georgia, serif;
        font-size: 17px;
        line-height: 1.76;
        color: #2c2d33;
        background: radial-gradient(circle at top left, #f9f6f1 0%, #f3f0ea 40%, #ece8e0 100%);
        font-weight: 400;
        -webkit-font-smoothing: antialiased;
      }

      .container {
        max-width: 720px;
        margin: 60px auto;
        padding: 60px 48px;
        background-color: rgba(255, 255, 255, 0.9);
        box-shadow: 0 24px 48px rgba(33, 30, 24, 0.08);
        border-radius: 14px;
        backdrop-filter: blur(4px);
      }

      h1 {
        font-family: 'Source Serif Pro', serif;
        font-size: 31px;
        font-weight: 500;
        margin: 0 0 32px 0;
        color: #292a30;
      }

      p {
        margin: 0 0 20px 0;
        line-height: 1.75;
      }

      a {
        color: #8f6a60;
        text-decoration: underline;
        text-decoration-thickness: 1px;
        text-underline-offset: 2px;
      }

      a:hover {
        color: #6b5046;
      }

      .section {
        margin-bottom: 40px;
      }

      .works-title {
        font-family: 'Lora', serif;
        font-weight: 500;
        font-variant: small-caps;
        letter-spacing: 0.08em;
        margin-bottom: 18px;
        color: #41424a;
        font-size: 0.9em;
      }

      .work-item {
        margin-bottom: 14px;
        line-height: 1.68;
      }

      .work-link {
        display: block;
        text-decoration: none;
        color: #2d2e32;
        font-weight: 400;
        transition: color 0.2s ease;
      }

      .work-link:hover {
        color: #705246;
      }

      .work-title {
        font-weight: 400;
        letter-spacing: 0.015em;
      }

      .publication {
        color: #8f6a60;
      }

      .year {
        color: #9b9ca0;
      }

      .description {
        color: #8b8c90;
        font-style: italic;
        margin-top: 4px;
      }

      .contact {
        margin-top: 50px;
        padding-top: 30px;
        border-top: 1px solid #e5e5e5;
      }

      .footer-image {
        margin-top: 30px;
        text-align: left;
      }

      .footer-image img {
        width: 60px;
        height: auto;
        opacity: 0.7;
      }

      @media (max-width: 768px) {
        .container {
          margin: 30px auto;
          padding: 36px 20px;
          border-radius: 10px;
          box-shadow: 0 16px 32px rgba(33, 30, 24, 0.08);
        }

        h1 {
          font-size: 24px;
        }

        body {
          font-size: 16px;
        }
      }

      pre {
        background-color: #f5f5f5;
        padding: 18px;
        border-radius: 4px;
        overflow-x: auto;
        margin: 20px 0;
        scrollbar-width: none;
      }

      pre::-webkit-scrollbar {
        display: none;
      }

      code {
        font-family: 'IBM Plex Mono', 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
        font-size: 14px;
        line-height: 1.55;
        font-weight: 400;
      }

      pre code {
        display: block;
        white-space: pre !important;
        word-wrap: normal !important;
        word-break: normal;
        overflow-x: auto;
      }

      p code,
      li code,
      h1 code,
      h2 code,
      h3 code {
        background-color: #f5f5f5;
        padding: 3px 5px;
        border-radius: 3px;
        font-size: 0.9em;
        white-space: pre-wrap;
        word-wrap: break-word;
      }

      .post-content {
        overflow: visible;
      }

      .post-content mjx-container[display="true"] {
        display: block;
        text-align: center;
        margin: 1em 0;
        overflow-x: auto;
        overflow-y: visible;
        max-width: 100%;
        width: 100%;
        box-sizing: border-box;
        padding-top: 1em;
        padding-bottom: 1em;
        scrollbar-width: none;
      }

      .post-content mjx-container[display="true"]::-webkit-scrollbar {
        display: none;
      }

      .post-content mjx-container[display="true"] mjx-math {
        min-width: 0;
        max-width: 100%;
        white-space: normal;
      }

      .post-content img {
        display: block;
        margin-left: auto;
        margin-right: auto;
        max-width: 100%;
        height: auto;
        border-radius: 4px;
      }

      .post-content img + em {
        display: block;
        text-align: center;
        font-size: 0.9em;
        color: #777;
        margin-top: -1em;
        margin-bottom: 1.5em;
      }

      .section ul,
      .section ol,
      .post-content ul,
      .post-content ol {
        margin: 0 0 1.4em 1.8em;
        padding: 0;
        list-style-position: outside;
      }

      .section ul ul,
      .section ul ol,
      .section ol ul,
      .section ol ol,
      .post-content ul ul,
      .post-content ul ol,
      .post-content ol ul,
      .post-content ol ol {
        margin-top: 0.6em;
        margin-bottom: 0.6em;
      }

      .section li,
      .post-content li {
        margin-bottom: 0.45em;
      }

      .section li:last-child,
      .post-content li:last-child {
        margin-bottom: 0;
      }

      .language-footer {
        margin: 50px auto 30px;
        text-align: center;
        font-size: 0.9rem;
        color: #8b8c90;
      }

      .language-switcher {
        display: inline-flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
        justify-content: center;
      }

      .language-switcher a {
        color: inherit;
        text-decoration: none;
        font-weight: 500;
      }

      .language-switcher a:hover {
        color: #6b5046;
      }

      .language-switcher .language-current {
        font-weight: 500;
        color: #2d2e32;
      }

      .language-switcher-separator {
        color: #c5c5c5;
      }
    </style>

    <script async src="https://cdn.seline.so/seline.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/viz.js"></script>
  </head>
  <body>
    <div class="container">
      {{ block "main" . }}{{ end }}
    </div>
    {{ if gt (len .Site.Languages) 1 }}
      {{ $currentLang := .Site.Language.Lang }}
      {{ $home := .Site.Home }}
      <footer class="language-footer">
        <nav class="language-switcher" aria-label="Language selector">
          {{ range $index, $lang := .Site.Languages }}
            {{ if gt $index 0 }}
              <span class="language-switcher-separator">Â·</span>
            {{ end }}
            {{ if eq $lang.Lang $currentLang }}
              <span class="language-current">{{ $lang.LanguageName }}</span>
            {{ else }}
              {{ with (where $.Page.AllTranslations "Language.Lang" $lang.Lang) }}
                {{ with (index . 0) }}
                  <a href="{{ .RelPermalink }}">{{ $lang.LanguageName }}</a>
                {{ end }}
              {{ else }}
                {{ with (where $home.AllTranslations "Language.Lang" $lang.Lang) }}
                  {{ with (index . 0) }}
                    <a href="{{ .RelPermalink }}">{{ $lang.LanguageName }}</a>
                  {{ end }}
                {{ else }}
                  {{ if eq $lang.Lang $home.Language.Lang }}
                    <a href="{{ $home.RelPermalink }}">{{ $lang.LanguageName }}</a>
                  {{ else }}
                    <a href="/{{ $lang.Lang }}/">{{ $lang.LanguageName }}</a>
                  {{ end }}
                {{ end }}
              {{ end }}
            {{ end }}
          {{ end }}
        </nav>
      </footer>
    {{ end }}
    {{ partial "math.html" . }}
  </body>
</html>
